<div class="container">
  <div class="row">
    <div class="col-4">
      <table class="table">
        <h2 style="text-align: center;"><%= @member.name %>のプロフィール</h2>
        <tr><%= image_tag @member.get_profile_image, class: "rounded-circle", size: "100x100" %></tr>
        <tr style="text-align: center;">
          <th>投稿<br><%= @member.posts.count %></th>
          <th>
            <%= link_to member_followings_path(@member.id), :style=>"color: #000;" do %>
              フォロー<br><%= @member.followings.count %>
            <% end %>
          </th>
          <th>
            <%= link_to member_followers_path(@member.id), :style=>"color: #000;" do %>
              フォロワー<br><%= @member.followers.count %>
            <% end %>
          </th>
        </tr>
        <tr>
          <th>ニックネーム</th>
          <th colspan="2"><%= @member.name %></th>
        </tr>
        <tr>
          <th>自己紹介</th>
          <th colspan="2"><%= @member.introduction %></th>
        </tr>
      </table>
      <% if current_member == @member %>
        <%= link_to edit_member_path(@member.id), class: "btn btn-outline-secondary btn-block" do %>
          <i class="fas fa-user-edit"></i>プロフィールを編集
        <% end %>
      <% else %>
        <% if current_member.following?(@member) %>
          <%= link_to "フォロー中", member_relationships_path(@member.id), method: :delete, data: { confirm: "ファローを外しますか？" }, class: "btn btn-outline-secondary btn-block" %>
        <% else %>
          <%= link_to "フォロー", member_relationships_path(@member.id), method: :POST, class: "btn btn-outline-success btn-block" %>
        <% end %>
      <% end %>
      <% unless current_member == @member %>
        <% if @is_room == true %>
          <%= link_to "メッセージを送る", room_path(@room_id), class: "btn btn-outline-primary btn-block" %>
        <% else %>
          <%= form_with model: @room do |f| %>
            <%= fields_for @entry do |e| %>
              <%= e.hidden_field :member_id, value: @member.id %>
            <% end %>
            <%= f.submit "チャットを始める", class: "btn btn-outline-primary btn-block" %>
          <% end %>
        <% end %>
      <% end %>
      <%= link_to "いいねした投稿", likes_member_path(@member.id), class: "btn btn-outline-primary btn-block" %>
    </div>
    <div class="col-8">
      <div class="card-deck">
        <% @posts.each do |post| %>
          <div class="col-md-6">
            <div class="card mb-4 shadow-sm">
              <div class="card-header profile_image">
                <%= image_tag post.member.get_profile_image %>
              </div>
              <% if post.post_image.present? %>
                <div class="card-img-top">
                  <%= link_to post_path(post.id) do %>
                    <%= image_tag post.post_image, size: "180x230" %>
                  <% end %>
                </div>
              <% end %>
              <div class="card-body">
                <span id="like_<%= post.id %>"><%= render "public/likes/like", post: post %></span>
                <span>
                  <%= render "public/comments/count", post: post %>
                </span><br><br>
                <%= link_to post_path(post.id) do %>
                  <h5 class="card-title"><%= post.title %></h4>
                <% end %>
                <p class="card-text"><%= post.body.truncate(50) %></p>  <!--50字まで表示-->
              </div>
              <div class="card-footer">
                <%= render 'public/posts/time', post: post %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>