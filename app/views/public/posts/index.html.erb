<div class="container">
  <div class="row">
    <div class="mx-auto col-10">
      <h2>投稿一覧</h2>
    </div>
  </div>
  <div class="card-deck">
    <% @posts.each do |post| %>
      <div class="col-4">
        <div class="card mb-4 shadow-sm">
          <div class="card-header">
            <%= link_to member_path(post.member.id) do %>
              <%= image_tag post.member.get_profile_image, size: "30x30" %>
            <% end %>
          </div>
          <% if post.post_image.present? %>
            <div class="card-img-top">
              <%= link_to post_path(post.id) do %>
                <%= image_tag post.post_image, size: "200x250" %>
              <% end %>
            </div>
          <% end %>
          <div class="card-body">
            <%= link_to post_path(post.id) do %>
              <h5 class="card-title"><%= post.title %></h4>
            <% end %>
            <p class="card-text"><%= post.body.truncate(50) %></p>  <!--50字まで表示-->
          </div>
          <div class="card-footer">
            <% if (@now - post.created_at) <= 60 * 60 %>                    <!--もし 現在時刻 - 投稿時間 が１時間以下だったら-->
              <%=((@now - post.created_at) / 60).to_i.to_s + "分前" %>      <!-- 〇〇"分前" と表示-->
            <% elsif (@now - post.created_at) <= 60 * 60 * 24 %>            <!--もし 現在時刻 - 投稿時間 が 24時間以下だったら-->
              <%=((@now - post.created_at) / 3600).to_i.to_s + "時間前" %>  <!-- 〇〇"時間前" と表示-->
            <% elsif (@today - post.created_at.to_date) <= 30 %>            <!--もし 現在時刻 - 投稿時間 が30日以下だったら-->
              <%= (@today - post.created_at.to_date).to_i.to_s + "日前" %>  <!-- 〇〇"日前" と表示-->
            <% else %>                                                      <!--もし 現在時刻 - 投稿時間 が30日を超えていたら-->
              <%= post.created_at.strftime('%Y-%m-%d') %>                   <!-- yyyy-mm-dd と表示-->
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>